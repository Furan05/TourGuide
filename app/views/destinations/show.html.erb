<!-- En-tête avec image principale -->
<div class="relative h-96">
  <% if @destination.image.present? %>
    <%= image_tag @destination.image, class: "w-full h-full object-cover", alt: @destination.name %>
  <% else %>
    <img
      src="https://source.unsplash.com/random/1200x800/?<%= @destination.name.parameterize %>,travel"
      alt="<%= @destination.name %>"
      class="w-full h-full object-cover"
    />
  <% end %>
  <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black opacity-60"></div>

  <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
    <div class="container mx-auto">
      <div class="flex flex-col md:flex-row md:items-end justify-between">
        <div>
          <div class="flex items-center mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span><%= @destination.country %><%= ", #{@destination.city}" if @destination.city.present? %></span>
          </div>
          <h1 class="text-4xl font-bold mb-2"><%= @destination.name %></h1>
          <div class="flex items-center">
            <div class="flex items-center mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400 fill-current" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
              </svg>
              <span class="ml-1">4.8</span>
            </div>
            <span class="text-gray-300">(<%= rand(100..500) %> avis)</span>
          </div>
        </div>

        <div class="flex mt-4 md:mt-0 space-x-3">
          <button class="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-md flex items-center backdrop-blur-sm transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Favoris</span>
          </button>
          <button class="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-md flex items-center backdrop-blur-sm transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
              <polyline points="16 6 12 2 8 6"></polyline>
              <line x1="12" y1="2" x2="12" y2="15"></line>
            </svg>
            <span>Partager</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Navigation par onglets -->
<div class="sticky top-0 bg-white shadow-sm z-10">
  <div class="container mx-auto">
    <div class="flex overflow-x-auto">
      <a
        href="#apercu"
        class="px-6 py-4 font-medium text-sm whitespace-nowrap text-blue-600 border-b-2 border-blue-600"
        onclick="changeTab(event, 'apercu')"
      >
        Aperçu
      </a>
      <a
        href="#guides"
        class="px-6 py-4 font-medium text-sm whitespace-nowrap text-gray-600 hover:text-gray-900"
        onclick="changeTab(event, 'guides')"
      >
        Guides locaux
      </a>
      <a
        href="#experiences"
        class="px-6 py-4 font-medium text-sm whitespace-nowrap text-gray-600 hover:text-gray-900"
        onclick="changeTab(event, 'experiences')"
      >
        Expériences
      </a>
      <a
        href="#avis"
        class="px-6 py-4 font-medium text-sm whitespace-nowrap text-gray-600 hover:text-gray-900"
        onclick="changeTab(event, 'avis')"
      >
        Avis
      </a>
    </div>
  </div>
</div>

<!-- Contenu principal -->
<main class="container mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Colonne principale -->
    <div class="lg:col-span-2">
      <!-- Onglet Aperçu -->
      <div id="apercu" class="tab-content block">
        <section class="bg-white rounded-lg shadow-sm p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">À propos de <%= @destination.name %></h2>
          <p class="text-gray-600 mb-6 leading-relaxed">
            <%= @destination.description.present? ? @destination.description : "#{@destination.name} est une destination fascinante qui offre aux visiteurs une combinaison unique de culture, d'histoire et de beauté naturelle. Explorez cette destination avec des guides locaux pour découvrir ses trésors cachés et vivre des expériences authentiques." %>
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="border rounded-md p-4">
              <h3 class="font-medium text-gray-900 mb-3">Informations pratiques</h3>
              <ul class="space-y-3">
                <li class="flex items-start">
                  <span class="text-gray-500 w-32">Climat:</span>
                  <span class="text-gray-800">Tempéré</span>
                </li>
                <li class="flex items-start">
                  <span class="text-gray-500 w-32">Meilleure période:</span>
                  <span class="text-gray-800">Avril à Octobre</span>
                </li>
                <li class="flex items-start">
                  <span class="text-gray-500 w-32">Langue:</span>
                  <span class="text-gray-800"><%= ['Français', 'Anglais', 'Espagnol', 'Italien', 'Allemand'].sample %></span>
                </li>
                <li class="flex items-start">
                  <span class="text-gray-500 w-32">Monnaie:</span>
                  <span class="text-gray-800"><%= ['Euro (€)', 'Dollar ($)', 'Livre (£)', 'Yen (¥)'].sample %></span>
                </li>
              </ul>
            </div>
            <div class="border rounded-md p-4">
              <h3 class="font-medium text-gray-900 mb-3">Quand visiter</h3>
              <div class="grid grid-cols-4 gap-1">
                <% ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Août', 'Sep', 'Oct', 'Nov', 'Déc'].each_with_index do |month, index| %>
                  <div
                    class="text-center py-2 rounded <%= index >= 3 && index <= 9 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-500' %>"
                  >
                    <%= month %>
                  </div>
                <% end %>
              </div>
              <p class="text-sm text-gray-500 mt-2">
                Le vert indique les meilleurs mois pour visiter en fonction du climat et de l'affluence.
              </p>
            </div>
          </div>
        </section>

        <!-- Guides recommandés -->
        <section class="bg-white rounded-lg shadow-sm p-6 mb-8">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Guides locaux recommandés</h2>
            <a href="#guides" class="text-blue-600 hover:text-blue-800 text-sm flex items-center" onclick="changeTab(event, 'guides')">
              Voir tous
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </a>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <% 4.times do |i| %>
              <div class="border rounded-lg overflow-hidden hover:shadow-md transition flex">
                <div class="w-24 h-24 bg-blue-100 flex items-center justify-center text-blue-500 text-2xl font-bold">
                  <%= ('A'..'Z').to_a.sample %>
                </div>
                <div class="p-4 flex-1">
                  <div class="flex justify-between">
                    <h3 class="font-medium text-gray-900"><%= ["Jean", "Marie", "Carlos", "Sophie", "Ahmed", "Yuki", "Elena", "Marco"].sample %></h3>
                    <div class="flex items-center bg-gray-100 px-2 py-1 rounded text-sm">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400 fill-current" viewBox="0 0 24 24">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                      </svg>
                      <span class="ml-1"><%= (4.0..5.0).step(0.1).to_a.sample.round(1) %></span>
                    </div>
                  </div>
                  <p class="text-sm text-gray-500 mt-1">Guide depuis <%= rand(1..5) %> ans</p>
                  <div class="mt-2 flex items-center justify-between">
                    <span class="text-sm text-blue-600 font-medium"><%= rand(3..10) %> expériences</span>
                    <a href="#" class="text-sm text-gray-600 hover:text-blue-600">Voir le profil</a>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </section>

        <!-- Expériences populaires -->
        <section class="bg-white rounded-lg shadow-sm p-6">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Expériences populaires</h2>
            <a href="#experiences" class="text-blue-600 hover:text-blue-800 text-sm flex items-center" onclick="changeTab(event, 'experiences')">
              Voir toutes
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </a>
          </div>

          <div class="space-y-4">
            <% 3.times do |i| %>
              <div class="flex bg-gray-50 rounded-lg overflow-hidden">
                <div class="w-24 h-24 bg-blue-100 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <% icons = [
                      '<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',
                      '<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',
                      '<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>'
                    ] %>
                    <%= icons[i].html_safe %>
                  </svg>
                </div>
                <div class="p-4 flex-1">
                  <div class="flex justify-between items-start">
                    <div>
                      <h3 class="font-medium text-gray-900"><%= ["Visite du centre historique", "Découverte des marchés locaux", "Randonnée panoramique", "Tour gastronomique", "Atelier d'artisanat local"].sample %></h3>
                      <span class="text-sm text-gray-500">Par <%= ["Jean", "Marie", "Carlos", "Sophie", "Ahmed"].sample %></span>
                    </div>
                    <div class="flex items-center bg-white px-2 py-1 rounded">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400 fill-current" viewBox="0 0 24 24">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                      </svg>
                      <span class="ml-1 text-sm"><%= (4.0..5.0).step(0.1).to_a.sample.round(1) %></span>
                    </div>
                  </div>
                  <div class="flex items-center mt-2 text-sm text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span><%= ["2-3 heures", "Demi-journée", "Journée complète"].sample %></span>
                    <span class="mx-2">•</span>
                    <span>À partir de <%= rand(20..100) %>€</span>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </section>
      </div>

      <!-- Onglet Guides -->
      <div id="guides" class="tab-content hidden">
        <section class="bg-white rounded-lg shadow-sm p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-6">Guides locaux à <%= @destination.name %></h2>

          <div class="mb-6">
            <div class="relative">
              <input type="text" placeholder="Rechercher un guide..." class="w-full px-4 py-2 border rounded-md pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute left-3 top-2.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
          </div>

          <div class="space-y-6">
            <% 8.times do |i| %>
              <div class="border rounded-lg p-4 hover:shadow-md transition">
                <div class="flex flex-col md:flex-row gap-4">
                  <div class="w-full md:w-40 h-40 bg-blue-100 rounded-lg flex items-center justify-center text-blue-500 text-4xl font-bold shrink-0">
                    <%= ('A'..'Z').to_a.sample %>
                  </div>
                  <div class="flex-1">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-3">
                      <div>
                        <h3 class="text-lg font-bold text-gray-900"><%= ["Jean", "Marie", "Carlos", "Sophie", "Ahmed", "Yuki", "Elena", "Marco"].sample %></h3>
                        <p class="text-gray-500">Guide depuis <%= rand(1..10) %> ans</p>
                      </div>
                      <div class="flex items-center mt-2 md:mt-0">
                        <div class="flex items-center mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400 fill-current" viewBox="0 0 24 24">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                          </svg>
                          <span class="ml-1 font-medium"><%= (4.0..5.0).step(0.1).to_a.sample.round(1) %></span>
                        </div>
                        <span class="text-gray-500">(<%= rand(10..200) %> avis)</span>
                      </div>
                    </div>

                    <p class="text-gray-600 mb-4">
                      <%= ["Passionné d'histoire et natif de la région.",
                           "Expert en cuisine locale et marchés traditionnels.",
                           "Spécialiste de la randonnée et des sentiers secrets.",
                           "Artiste local qui vous fera découvrir la scène culturelle.",
                           "Ancien professeur d'histoire, partage son savoir avec passion."].sample %>
                    </p>

                    <div class="flex flex-wrap gap-2 mb-4">
                      <% ["Français", "Anglais", "Espagnol", "Italien", "Allemand", "Japonais", "Chinois", "Arabe"].sample(rand(1..3)).each do |lang| %>
                        <span class="bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-700"><%= lang %></span>
                      <% end %>

                      <% ["Histoire", "Culture", "Gastronomie", "Nature", "Photographie", "Art", "Architecture"].sample(rand(2..4)).each do |spec| %>
                        <span class="bg-blue-100 px-3 py-1 rounded-full text-sm text-blue-700"><%= spec %></span>
                      <% end %>
                    </div>

                    <div class="flex justify-between items-center">
                      <span class="text-blue-600 font-medium"><%= rand(3..15) %> expériences disponibles</span>
                      <a href="#" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Voir le profil</a>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>

          <div class="mt-8 flex justify-center">
            <button class="px-6 py-3 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition">
              Voir plus de guides
            </button>
          </div>
        </section>
      </div>

      <!-- Autres onglets à développer selon besoin -->
      <div id="experiences" class="tab-content hidden">
        <!-- Contenu pour l'onglet Expériences -->
      </div>

      <div id="avis" class="tab-content hidden">
        <!-- Contenu pour l'onglet Avis -->
      </div>
    </div>

    <!-- Colonne latérale -->
    <div class="lg:col-span-1">
      <div class="bg-white rounded-lg shadow-sm p-6 sticky top-24">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Explorer <%= @destination.name %></h3>

        <div class="space-y-4 mb-6">
          <a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span>Galerie photos</span>
          </a>
          <a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span>Carte interactive</span>
          </a>
          <a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <span>Guides disponibles (<%= rand(10..30) %>)</span>
          </a>
          <a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>Meilleures périodes</span>
          </a>
          <a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            <span>Conseils voyage</span>
          </a>
        </div>

        <div class="border-t pt-6">
          <h3 class="font-bold text-gray-800 mb-4">Types d'expériences</h3>
          <div class="space-y-2">
            <% ["Visites guidées", "Gastronomie", "Nature & Aventure", "Culture & Histoire", "Vie nocturne", "Artisanat local"].each do |type| %>
              <a href="#" class="block px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700 transition">
                <%= type %> (<%= rand(3..15) %>)
              </a>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<script>
  function changeTab(e, tabId) {
    e.preventDefault();

    // Masquer tous les contenus d'onglets
    document.querySelectorAll('.tab-content').forEach(tab => {
      tab.classList.add('hidden');
    });

    // Afficher le contenu de l'onglet sélectionné
    document.getElementById(tabId).classList.remove('hidden');

    // Mettre à jour les classes des liens d'onglets
    document.querySelectorAll('a[href^="#"]').forEach(link => {
      if (link.getAttribute('href') === '#' + tabId) {
        link.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
        link.classList.remove('text-gray-600', 'hover:text-gray-900');
      } else {
        link.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
        link.classList.add('text-gray-600', 'hover:text-gray-900');
      }
    });
  }
</script>
